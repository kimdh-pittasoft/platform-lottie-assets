<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Platform Lottie Assets Demo</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .shad-card { 
      background: white;
      border-radius: 1rem;
      box-shadow: 0 2px 8px 0 rgba(0,0,0,0.08);
      border: 1px solid #e4e4e7;
      padding: 1.5rem;
      transition: box-shadow 0.2s;
    }
    .shad-btn {
      padding: 0.25rem 0.75rem;
      border-radius: 0.75rem;
      border: 1px solid #e4e4e7;
      background: #f4f4f5;
      color: #18181b;
      transition: background 0.15s;
      margin-top: 0.25rem;
      font-size: 0.875rem;
    }
    .shad-btn:hover {
      background: #e4e4e7;
    }
    .shad-input {
      width: 100%;
      padding: 0.5rem 0.75rem;
      border-radius: 0.5rem;
      border: 1px solid #d4d4d8;
      background: #f4f4f5;
      color: #18181b;
      font-size: 1rem;
    }
  </style>
  <!-- lottie-web -->
  <script src="https://unpkg.com/lottie-web@5.12.0/build/player/lottie.min.js"></script>
</head>
<body class="bg-zinc-50 text-zinc-900 min-h-screen">
  <div class="max-w-4xl mx-auto py-8 px-4">
    <h1 class="text-3xl font-bold mb-4">Platform Lottie Assets Demo <span class="text-base font-normal text-zinc-500">(GitHub Pages)</span></h1>
    <div class="flex gap-2 items-center mb-8">
      <input id="search" class="shad-input max-w-xs" placeholder="애니메이션 이름 검색..." />
      <span id="total-count" class="text-zinc-500 text-sm"></span>
    </div>
    <div id="list" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"></div>
  </div>
  <script>
    let lottieFiles = [];
    let filtered = [];

    // animations.json을 fetch해서 실제 파일 리스트 자동 반영
    fetch('./lotties/animations.json')
      .then(res => res.json())
      .then(files => {
        lottieFiles = files;
        filtered = files;
        renderList();
      });

    document.getElementById('search').addEventListener('input', e => {
      const q = e.target.value.trim().toLowerCase();
      filtered = lottieFiles.filter(fn => fn.toLowerCase().includes(q));
      renderList();
    });

    function renderList() {
      const $list = document.getElementById('list');
      $list.innerHTML = '';
      document.getElementById('total-count').textContent = `총 ${filtered.length}개`;
      filtered.forEach(filename => {
        // 카드 생성
        const card = document.createElement('div');
        card.className = 'shad-card flex flex-col items-center';

        // Lottie Container
        const animDiv = document.createElement('div');
        animDiv.className = 'w-28 h-28 mb-4';
        card.appendChild(animDiv);

        // Lottie 애니메이션 로드
        lottie.loadAnimation({
          container: animDiv,
          renderer: 'svg',
          loop: true,
          autoplay: true,
          path: `./lotties/${filename}`
        });

        // 파일명 텍스트
        const name = document.createElement('div');
        name.className = 'mb-1 text-center text-sm font-mono break-all select-all';
        name.textContent = filename;
        card.appendChild(name);

        // 이름 복사 버튼
        const copyBtn = document.createElement('button');
        copyBtn.className = 'shad-btn';
        copyBtn.innerText = '이름 복사';
        copyBtn.onclick = () => {
          navigator.clipboard.writeText(filename);
          copyBtn.innerText = '복사됨!';
          setTimeout(() => copyBtn.innerText = '이름 복사', 1000);
        };
        card.appendChild(copyBtn);

        $list.appendChild(card);
      });
    }
  </script>
</body>
</html>
